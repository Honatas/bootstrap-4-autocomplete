!function(l){var n={treshold:4,maximumItems:5,highlightTyped:!0,highlightClass:"text-primary"};function a(e,n){var a=e.val();if(a.length<n.treshold)return e.dropdown("hide"),0;var r=e.next();r.html("");var t=Object.keys(n.source),o=new RegExp(a.toLowerCase().replace(/\s/g,"(.*)"),"gi");return t.filter(function(e){return o.test(e)}).slice(0,n.maximumItems).map(function(e){var t=n.source[e],o={label:n.label?t[n.label]:e,value:n.value?t[n.value]:t};r.append(function(e,t,o){var n=t.label;return o.highlightTyped&&e.split(" ").map(function(e){var t=new RegExp(e,"gi");n=n.replace(t,'<span class="'+o.highlightClass+'">'+e+"</span>")}),'<button type="button" class="dropdown-item" data-value="'+t.value+'">'+n+"</button>"}(a,o,n))}),e.next().find(".dropdown-item").click(function(){e.val(l(this).text()),n.onSelectItem&&n.onSelectItem({value:l(this).data("value"),label:l(this).text()},e[0])}),r.children().length}l.fn.autocomplete=function(e){var t={};l.extend(t,n,e);var o=l(this);return o.parent().removeClass("dropdown"),o.removeAttr("data-toggle"),o.removeClass("dropdown-toggle"),o.parent().find(".dropdown-menu").remove(),o.dropdown("dispose"),o.parent().addClass("dropdown"),o.attr("data-toggle","dropdown"),o.addClass("dropdown-toggle"),o.after('<div class="dropdown-menu"></div>'),o.dropdown(t.dropdownOptions),this.off("click").click(function(e){0==a(o,t)&&(e.stopPropagation(),o.dropdown("hide"))}),this.off("keyup").keyup(function(){0<a(o,t)?o.dropdown("show"):o.click()}),this}}(jQuery);