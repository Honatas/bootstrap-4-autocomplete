!function(l){var o={treshold:4,maximumItems:5,highlightTyped:!0,highlightClass:"text-primary"};function a(e,o){var a=e.val();if(a.length<o.treshold)return e.dropdown("hide"),0;var r=e.next();r.html("");var t=Object.keys(o.source),n=new RegExp(a.replace(/[^A-Za-z0-9]/g," ").replace(/\s/g,"(.*)"),"gi");return t.filter(function(e){return e.match(n)}).slice(0,o.maximumItems).map(function(e){var t=o.source[e],n={label:o.label?t[o.label]:e,value:o.value?t[o.value]:t};r.append(function(e,t,n){var o=t.label;return n.highlightTyped&&e.trim().replace(/[^A-Za-z0-9]/gi," ").split(" ").filter(function(e){return 0<e.length}).map(function(e){var t=new RegExp(e+"(?![^>]*>)","gi");o=o.replace(t,'<span class="'+n.highlightClass+'">'+e+"</span>")}),'<button type="button" class="dropdown-item" data-value="'+t.value+'">'+o+"</button>"}(a,n,o))}),e.next().find(".dropdown-item").click(function(){e.val(l(this).text()),o.onSelectItem&&o.onSelectItem({value:l(this).data("value"),label:l(this).text()},e[0])}),r.children().length}l.fn.autocomplete=function(e){var t={};l.extend(t,o,e);var n=l(this);return n.parent().removeClass("dropdown"),n.removeAttr("data-toggle"),n.removeClass("dropdown-toggle"),n.parent().find(".dropdown-menu").remove(),n.dropdown("dispose"),n.parent().addClass("dropdown"),n.attr("data-toggle","dropdown"),n.addClass("dropdown-toggle"),n.after('<div class="dropdown-menu"></div>'),n.dropdown(t.dropdownOptions),this.off("click").click(function(e){0==a(n,t)&&(e.stopPropagation(),n.dropdown("hide"))}),this.off("keyup").keyup(function(){0<a(n,t)?n.dropdown("show"):n.click()}),this}}(jQuery);